<!doctype html>
<html lang='en'>
<head>

  <title>DSpace</title>
  <meta charset='utf-8'/>
  <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' />
  <meta name='apple-mobile-web-app-status-bar-style' content='black' />
  <meta name='apple-mobile-web-app-capable' content='yes' />

  <!-- BEGIN DEV

  This file is only served for development purposes in order to keep
  assets separate (css/js) to have better debug functionality.

  *** THIS FILE IS NOT INCLUDED IN THE BUILD ***

  Please make neccessary changes to index.tmpl,
  which is the basis for the final build.

  -->
  <link href='assets/css/main.css' rel='stylesheet' />
  <link href='assets/css/ui.css' rel='stylesheet' />

  <script src='test/deps/mocha.js'></script>
  <script src='test/deps/chai.js'></script>
  <script src='test/deps/sinon.js'></script>
  <script src='deps/require.js'></script>
  <script>
    requirejs.config({
      baseUrl: '.',

      paths: {
        // directories
        "templates"        : "assets/templates",
        "template/helpers" : "app/helpers",
        "models" : "app/models",
        "collections" : "app/collections",
        "views" : "app/views",
        "templateMap" : "app/templateMap",
        "geofeeds": "app/geofeeds",
        "remoteStorage-locations": "app/remoteStorage-locations",

        // dependencies of hbs
        "i18nprecompile"   : "deps/hbs/i18nprecompile",
        "json2"            : "deps/hbs/json2",

        // general deps
        "hbs": "deps/hbs",
        "ender": 'deps/ender',
        "underscore": "deps/underscore",
        "backbone": "deps/backbone",
        "backbone-localstorage": "deps/backbone.localstorage",
        "Math.uuid": "deps/Math.uuid",
        "remoteStorage": "deps/remotestorage",

        "reqwest": "deps/reqwest",
        "handlebars": "deps/handlebars",

        "modestmaps": "deps/modestmaps",
        "easey": "deps/easey",
        "easey_handlers": "deps/easey_handlers",
        "domready": "deps/domready",
        "markers": "deps/markers"
      },

      "hbs": {
        "templateExtension" : "handlebars",
        "disableI18n" : true
      }

    });

    if(String(document.location).match(/\?test=1/)) {
      require(['test/runner', 'app/main']);
    } else {
      require(['app/main']);
    }
  </script>
  <!-- END DEV -->

</head>
<body>

  <div id='map' class='map' oncontextmenu='javascript: return false;'></div>
  <div id='ui'>
    <div id='mapContext' class='uiContext' oncontextmenu='javascript: return false;'></div>
    <div id='markerContext' class='uiContext' oncontextmenu='javascript: return false;'></div>
    <div id='topBaffle' class='baffle'></div>
    <div id='bottomBaffle' class='baffle'>
     <!-- FIXME: Provide generic API functions for any external feed to inject an icon into the WidgetBar and functionality for widget modal (i.e. remote-storage) -->
     <div id='widgetBar'>
       <div id='remotestorage-connect-icon' class='widgetIcon'><img class="cube action" src="/assets/images/remoteStorageIcon.svg"></div>
      <div id='searchWidget' class='widgetIcon'>
       <form id='searchForm'>
       <input type='search' name='query' id='geobarQuery' placeholder='Search...' x-webkit-speech />
       <input type='submit' style='opacity:0'>
       </form>
      </div>
     </div>
    </div>
    <div id='statusPanel' class='uiPanel'></div>
    <div id='controlPanel' class='uiPanel'>
      <div id='toggleFullscreen' class='uiButton'>⇱</div>
      <div id='toggleMiniMap' class='uiButton'>M</div>
      <div id='userOptions' class='uiButton'>⚙</div>
      <div id='userMode' class='uiButton'>✈</div>
      <div id='toggleSideBar' class='uiButton'>⛁</div>
    </div>
    <div id='modal' class='uiModal'>
      <div id='modal-close'>X</div>
      <div id='modal-content'></div>
    </div>
    <div id='widgetModal' class='uiWidgetModal'></div>
    <div id='sidebar'>
     <div id='featureBox'></div>
    </div>
    <div id='miniMap'><div id='mmViewport'></div></div>
  </div>
  <div id='splash'><h1>DSpace</h1><p class='loader'>Client loading...</p></div>

</body>
</html>
